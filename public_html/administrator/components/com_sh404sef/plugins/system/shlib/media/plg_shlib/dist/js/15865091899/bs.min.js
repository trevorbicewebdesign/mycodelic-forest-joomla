/*! Copyright Weeblr llc 2020 - Licence: http://www.gnu.org/copyleft/gpl.html GNU/GPL */
var shlBootstrap=shlBootstrap||function(h){var e={updateBootstrap:function(){h("*[rel=tooltip]").tooltip(),h("select").chosen({disable_search_threshold:10,allow_single_deselect:!0}),h(".radio.btn-group label").addClass("btn"),h(".btn-group label:not(.active)").click(function(){var e=h(this),t=h("#"+e.attr("for"));t.prop("checked")||(e.closest(".btn-group").find("label").removeClass("active btn-success btn-danger btn-primary"),""==t.val()?e.addClass("active btn-primary"):0==t.val()?e.addClass("active btn-danger"):e.addClass("active btn-success"),t.prop("checked",!0))}),h(".btn-group input[checked=checked]").each(function(){""==h(this).val()?h("label[for="+h(this).attr("id")+"]").addClass("active btn-primary"):0==h(this).val()?h("label[for="+h(this).attr("id")+"]").addClass("active btn-danger"):h("label[for="+h(this).attr("id")+"]").addClass("active btn-success")})},canOpenModal:!0,modals:{},modalTemplate:"<div class='shmodal hide ' id='{%selector%}'><div class='shmodal-header'><button type='button' class='close' data-dismiss='modal'>Ã—</button>{%title%}</div><div id='{%selector%}-container'></div></div>",selectedIdsUrl:"",setSelectedIdsUrl:function(e){shlBootstrap.selectedIdsUrl=e},getModalUrl:function(e){return e+shlBootstrap.selectedIdsUrl},closeModal:function(){h("div.shmodal-header button.close").click()},setModalTitleFromModal:function(e){window.parent.jQuery("div.shmodal-header:visible").html("<h3>"+e+"</h3>")},registerModal:function(e){var t;t=h.extend({selector:"",title:"",url:"",width:.5,height:.5,onclose:"",footer:"",content:"",onDisplay:"",backdrop:!0,keyboard:!1},e),shlBootstrap.modals[t.selector]=t},renderModal:function(e,t){var r=shlBootstrap.modalTemplate.replace(new RegExp("{%selector%}","g"),t.selector),a=t.title?"<h3>"+t.title+"</h3>":"&nbsp;";r=r.replace("{%title%}",a),h(r).appendTo("#shl-modals-container"),h("#"+t.selector).on("show",function(){if(!shlBootstrap.canOpenModal)return!1;var e,t=shlBootstrap.modals[this.id],r=t.width<1?h(window).width()*t.width:t.width,a=t.height<1?h(window).height()*t.height:t.height,o=shlBootstrap.getModalUrl(t.url),n=jQuery("#"+t.selector);e=t.content?t.content:'<iframe class="iframe" src="'+o+'" height="'+a+'" width="'+r+'" ></iframe>',jQuery("#"+t.selector+"-container").html('<div class="shmodal-body" style="height:'+a+"px; width:"+r+'px;">'+e+"</div>"+t.footer);var l=n.height(),s=n.width(),i=jQuery(window).height(),d=(jQuery(window).width()-s)/2,c=(i-l)/2;jQuery("#"+t.selector).css({"margin-top":c,top:"0"}),jQuery("#"+t.selector).css({"margin-left":d,left:"0"}),t.onDisplay&&"function"==typeof window[t.onDisplay]&&window[t.onDisplay](this)}),h("#"+t.selector).on("hide",function(){var e=shlBootstrap.modals[this.id];e.onclose&&e.onclose(),jQuery("#"+this.id+"-container").innerHTML=""}),h("#"+t.selector).modal({keyboard:t.keyboard,backdrop:t.backdrop,show:!1})},renderModals:function(){h.each(shlBootstrap.modals,shlBootstrap.renderModal)},inputCounters:{},registerInputCounter:function(e){e=h.extend({maxCharacterSize:-1,originalStyle:"badge-success",warningStyle:"badge-warning",errorStyle:"badge-important",warningNumber:20,errorNumber:40,displayFormat:"#left",style:"shl-char-counter",title:""},e),shlBootstrap.inputCounters[e.selector]=e},renderInputCounters:function(){h.each(shlBootstrap.inputCounters,shlBootstrap.renderInputCounter)},renderInputCounter:function(e,t){try{var r=h("#"+t.selector);r.length&&r.textareaCount(t)}catch(e){console.error(e)}},onReady:function(){h("<div id='shl-modals-container'></div>").appendTo("body"),shlBootstrap.renderModals(),shlBootstrap.renderInputCounters()}};return jQuery(document).ready(e.onReady),e}(jQuery);!function(r){r.fn.textareaCount=function(n,e){function t(){return h.html(function(){var e=c.val(),t=e.length;if(0<n.maxCharacterSize){t>=n.maxCharacterSize&&(e=e.substring(0,n.maxCharacterSize));var r=s(e),a=n.maxCharacterSize-r;if(l()||(a=n.maxCharacterSize),a<t){var o=this.scrollTop;c.val(e.substring(0,a)),this.scrollTop=o}h.removeClass(n.warningStyle),h.removeClass(n.originalStyle),t>n.errorNumber?h.addClass(n.errorStyle):t>n.warningNumber?h.addClass(n.warningStyle):h.addClass(n.originalStyle),u=c.val().length+r,l()||(u=c.val().length),f=d(i(c.val())),v=n.errorNumber-u}else{r=s(e);u=c.val().length+r,l()||(u=c.val().length),f=d(i(c.val()))}return function(){var e=n.displayFormat;return e=(e=e.replace("#input",u)).replace("#words",f),0<p&&(e=(e=e.replace("#max",p)).replace("#left",v)),e}()}()),void 0!==e&&e.call(this,{input:u,max:p,left:v,words:f}),!0}function l(){return-1!=navigator.appVersion.toLowerCase().indexOf("win")}function s(e){for(var t=0,r=0;r<e.length;r++)"\n"==e.charAt(r)&&t++;return t}function i(e){var t=(e+" ").replace(/^[^A-Za-z0-9]+/gi,""),r=rExp=/[^A-Za-z0-9]+/gi;return t.replace(r," ").split(" ")}function d(e){return e.length-1}n=r.extend({maxCharacterSize:-1,originalStyle:"originalTextareaInfo",warningStyle:"warningTextareaInfo",errorStyle:"errorTextareaInfo",warningNumber:20,errorNumber:40,displayFormat:"#input characters | #words words",title:""},n);var c=r(this);c.wrap("<div class='shl-char-counter-wrapper'></div>"),r("<div class='charleft badge "+n.style+"' "+(n.title?"title='"+n.title+"'":"")+">&nbsp;</div>").insertAfter(c);var h=c.next(".charleft");h.addClass(n.originalStyle);var u=0,p=n.maxCharacterSize,v=0,f=0;c.bind("keyup",function(e){t()}).bind("mouseover",function(e){setTimeout(function(){t()},10)}).bind("paste",function(e){setTimeout(function(){t()},10)}),t()}}(jQuery);
