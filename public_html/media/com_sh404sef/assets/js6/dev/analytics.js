parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"FA8U":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.escapeAttr=exports.escape=exports.render=void 0;var e=function(e,r,t){if(!t)return e(r);t.innerHTML=e(r)};exports.render=e;var r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},t={'"':"&quot;","'":"&#x27;","`":"&#x60;"},n=function(e){var r=function(r){return e[r]},t="(?:"+Object.keys(e).join("|")+")",n=RegExp(t),o=RegExp(t,"g");return function(e){return e=null==e?"":""+e,n.test(e)?e.replace(o,r):e}},o=n(r);exports.escape=o;var p=n(t);exports.escapeAttr=p;
},{}],"BYdJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isFontUrl=exports.isScriptUrl=exports.isStylesheetUrl=exports.isImageUrl=exports.trimLeadingSlashes=exports.trimTrailingSlashes=exports.trimFragment=exports.trimQuery=exports.trimUrlEnd=exports.appendPath=exports.makeProtocolRelative=exports.ensureSchemeOnSchemeRelativeUrl=exports.getDomainFromUrl=exports.absolutify=exports.isSecureUrl=exports.isHttpSuccess=exports.isHttpUrl=exports.isFullyQualified=exports.isFragment=exports.isProtocolRelative=exports.ensureArray=exports.abridge=exports.truncateOnWordForPixelLength=exports.rightTrimChars=exports.truncateOnWord=exports.getPlural=exports.matchStringEnd=exports.sprintf=exports.timedOutFetch=exports.timedOutPromise=exports.isPromise=exports.isNumber=exports.ms2S=exports.convertMs=exports.displayableFileSize=exports.shortFormatInteger=exports.roundWithPrecision=exports.propNumSort=exports.propAlphaSort=void 0;var t=require("./layout");function r(t){for(var r=1;r<arguments.length;r++){var o=null!=arguments[r]?arguments[r]:{},n=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(o).filter(function(t){return Object.getOwnPropertyDescriptor(o,t).enumerable}))),n.forEach(function(r){e(t,r,o[r])})}return t}function e(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var n=function(t,r){return function(e,o){return r=!!r,function(e,o){var n=r?e[t].toLowerCase():e[t],i=r?o[t].toLowerCase():o[t];return n<i?-1:n>i?1:0}}};exports.propAlphaSort=n;var i=function(t){return function(r,e){return function(r,e){var o=r[t],n=e[t];return o<n?-1:o>n?1:0}}};exports.propNumSort=i;var s=function(t,r){r=r||0;var e=Math.pow(10,r),o=t*e;return(o=Math.round(o))/e};exports.roundWithPrecision=s;var a=function(t){var r=Number.parseFloat(t);switch(!0){case r<1e4:r=r.toFixed();break;case r<1e6:r/=100,r=(r=Math.floor(r)/10).toFixed(1)+"K";break;default:r/=1e5,r=(r=Math.floor(r)/10).toFixed(2)+"M"}return r};exports.shortFormatInteger=a;var u=function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,e=["B","KB","MB","GB","TB"];try{var o;return t=Math.max(t,0),r&&(o=e.indexOf(r)),o<0&&(o=Math.floor((t?Math.log(t):0)/Math.log(1024)),o=Math.min(o,e.length-1)),t/=Math.pow(1024,o),s(t,o<2?0:1)+" "+e[o]}catch(n){console.error(n)}};exports.displayableFileSize=u;var p=function(t){var r,e,o,n,i;n=Math.floor(t/1e3),i=t%1e3,o=Math.floor(n/60),n%=60,e=Math.floor(o/60),o%=60;var s="";return(r=Math.floor(e/24))&&(s+=r+"d "),(e%=24)&&(s+=e+"h "),o&&(s+=o+"m "),n&&(s+=n+"s "),i&&(s+=i+"ms "),{day:r,hour:e,minute:o,seconds:n,milliseconds:i,full:s=s.trim()}};exports.convertMs=p;var l=function(t,r){return s(t/1e3,r)};exports.ms2S=l;var c=function(t){return!isNaN(parseFloat(t))&&!isNaN(t-0)};exports.isNumber=c;var f=function(t){return t&&"object"==o(t)&&"function"==typeof t.then};exports.isPromise=f;var h=function(t,r,e){return e||(e=function(){try{var t=Error("Operation timed-out after delay "+r+"ms");return t.name="WblTimeOutException",t}catch(t){console.error(t)}}),Promise.race([t,new Promise(function(t,o){setTimeout(o,r,e())})])};exports.timedOutPromise=h;var x=function(t,r,e,o){o=o||new AbortController,r.signal=o.signal;var n=fetch(t,r);return h(n,e,function(){try{o.abort();var r=Error("Fetch timed-out after delay "+e+"ms for "+t);return r.name="WblTimeOutException",r}catch(r){console.error(r)}})};exports.timedOutFetch=x;var v=function(r,e,o){if(!e||e.length<1)return r;o=!!o;for(var n=r,i=1;i<=e.length;++i){var s=(""+e[i-1]).replace(/\s+/g," ");n=n.replace(new RegExp("%"+i,"g"),o?(0,t.escape)(s):s)}return n.replace(new RegExp("%%","g"),"%")};exports.sprintf=v;var m=function(t,r){return r.forEach(function(r){if(t.endsWith(r))return!0}),!1};exports.matchStringEnd=m;var g=function(t,r){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"s";return"".concat(t).concat(r>1?e:"")};exports.getPlural=g;var d=function(t,r){for(var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"...",o="",n=t.split(" "),i=0;i<n.length;i++){if(!(o.length<=r-(n[i].length+e.length))){o+=e;break}o+=o?" "+n[i]:n[i]}return o};exports.truncateOnWord=d;var y=function(t,r){for(var e in r)t[e]=r[e]},b=function(t,r){return t?t.replace(new RegExp("["+r.join("")+"]+$"),""):t};exports.rightTrimChars=b;var S=function(t,r,e,o){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:" ...";try{var s=t,a=t.split(e),u="",p=o.createElement("div");y(p.style,n),p.style.width="auto",p.style.display="inline-block",p.style.left="-10000px",p.style.position="absolute";var l=o.createTextNode(u);p.appendChild(l),o.body.appendChild(p);for(var c=0;c<a.length;c++){if(u=u?u+e+a[c]:a[0],l.textContent=u+i,p.offsetWidth>=r){s=b(s,["-","|","_",".",",",":",";","&","{","(","[","@","=","+","/"]),s+=i;break}s=u}return s}catch(f){console.error(f)}};exports.truncateOnWordForPixelLength=S;var F={totalLength:50,introLength:30,bridge:"..."},O=function(t,e){var o=r({},F,e);if(t&&t.length>o.totalLength){var n=o.totalLength-(o.introLength+o.bridge.length),i=t.slice(0,o.introLength),s=t.slice(t.length-n);t=i+o.bridge+s}return t};exports.abridge=O;var P=function(t){return Array.isArray(t)?t:[t]};exports.ensureArray=P;var w=function(t){return t.startsWith("//")};exports.isProtocolRelative=w;var M=function(t){var r=t.startsWith("#");return r};exports.isFragment=M;var U=function(t){return t.match(/^[a-zA-Z0-9\-]+:\/\/.*/)};exports.isFullyQualified=U;var W=function(t){return M(t)||w(t)||t.startsWith("/")||t.startsWith("https://")||t.startsWith("http://")};exports.isHttpUrl=W;var E=function(t,r){return(r=r||[200,201,202,203,204,205,206,304]).indexOf(t)>-1};exports.isHttpSuccess=E;var L=function(t){return t.startsWith("https://")};exports.isSecureUrl=L;var j=function(t,r){try{return U(t)||w(t)?t:new URL(t,r).href}catch(e){error(e)}return t};exports.absolutify=j;var N=function(t){if(!U(t))return t;var r=t.match(/((http:|https:)?\/\/([^.]+\.)?.+\.[^\/]+)\/?/gm);return r&&r[0]?r[0]:t};exports.getDomainFromUrl=N;var R=function(t,r){return W(t)?t:(r.startsWith("https://")?"https:":"http:")+t};exports.ensureSchemeOnSchemeRelativeUrl=R;var T=function(t,r){var e=j(t,r);return e=e.replace(/^https?:\/\//,"//")};exports.makeProtocolRelative=T;var k=function t(r,e){var o=(e=P(e)).shift();if(!o)return r;if(!(o=I(o)))return r;var n=(r=H(r))+"/"+o;return e.length<=0?n:t(n,e)};exports.appendPath=k;var A=function(t){var r=B(t);return r=C(r)};exports.trimUrlEnd=A;var C=function(t){return t?t.split("?")[0]:t};exports.trimQuery=C;var B=function(t){return t?t.split("#")[0]:t};exports.trimFragment=B;var H=function(t){return t?t.replace(/\/+$/,""):t};exports.trimTrailingSlashes=H;var I=function(t){return t?t.replace(/^\/+/,""):t};exports.trimLeadingSlashes=I;var Q=function(t){return m(t,[".jpg",".jpeg",".png",".ico",".webp",".gif",".svg",".bmp",".tiff"])};exports.isImageUrl=Q;var z=function(t){return t.endsWith(".css")};exports.isStylesheetUrl=z;var D=function(t){return t.endsWith(".js")};exports.isScriptUrl=D;var _=function(t){return m(t,[".ttf",".otf",".eot",".woff",".woff2"])};exports.isFontUrl=_;
},{"./layout":"FA8U"}],"tHKJ":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function r(e,r,o){return r&&t(e.prototype,r),o&&t(e,o),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.wblThrottler=void 0;var o={average:2,burst:3},n=new Map,s=new Map,a=new Map,i=function(e,t){try{if(s.has(e)){var r=s.get(e);r.has(t)?(clearInterval(r.get(t).timer),r.delete(t)):console.error("Trying to clear item "+e+"/"+t+" but that item does not exist")}else console.error("Trying to clear item "+e+"/"+t+" but that scope does not exist")}catch(o){console.error(o)}},l=function(){function t(r){e(this,t),n.set("__default__",r||o)}return r(t,[{key:"setConfig",value:function(e,t){n.set(e,t)}},{key:"setDefaultConfig",value:function(e){n.set("__default__",e)}},{key:"clearAll",value:function(e){s.has(e)?(s.get(e).forEach(function(e){clearInterval(e.timer)}),s.delete(e)):console.error("Throttle lib: cannot clear scope, does not exist: "+e)}},{key:"refillBucket",value:function(e,t){try{if(!n.has(t))return void console.error("Trying to refill bucket "+e+"/"+t+" but no config for that item");var r=n.get(t);if(!s.has(e))return void console.error("Trying to refill bucket "+e+"/"+t+" but that scope does not exist");var o=s.get(e);if(!o.has(t))return void console.error("Trying to refill bucket "+e+"/"+t+" but there is no such item in that scope");var l,c,u=o.get(t);if(u.tokens<r.burst&&(u.tokens+=1,o.set(t,u)),u.tokens>0)if(a.has(e)&&(l=a.get(e)),l&&l.has(t)&&(c=l.get(t)),c&&c.length>0){u.tokens--,o.set(t,u);var f=c.shift();f&&f()}else i(e,t)}catch(h){console.error(h)}}},{key:"run",value:function(e,t,r,i){try{var l,c;!i&&n.has(r)?i=n.get(r):i?n.set(r,i):(i=o,n.set(r,i)),s.has(t)?l=s.get(t):(l=new Map,s.set(t,l)),l.has(r)?c=l.get(r):(c={tokens:i.burst,timer:setInterval(this.refillBucket,1e3/i.average,t,r)},l.set(r,c));return function(){for(var o=arguments.length,n=new Array(o),s=0;s<o;s++)n[s]=arguments[s];try{if(c.tokens>0)return c.tokens--,l.set(r,c),e(n);var i,u;console.log("Throttled Function, cannot run "+t+"/"+r+", have to slow down"),a.has(t)?i=a.get(t):(i=new Map,a.set(t,i)),i.has(r)?u=i.get(r):(u=[],i.set(r,u)),u.push(function(){return e(n)}),i.set(r,u)}catch(f){console.error(f)}}}catch(u){console.error(u)}}}]),t}(),c=new l;exports.wblThrottler=c;
},{}],"yg2M":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.asyncStore=void 0;var e=require("./utils");function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function o(e,t,o){return t&&r(e.prototype,t),o&&r(e,o),e}var s=function(){function r(){t(this,r),this.dataStorage=new Map,this.requestsStorage=new Map}return o(r,[{key:"get",value:function(t,r){t&&r||(0,e.error)("SEOINFO: invalid key/scope for get operation");try{if(this.scopedHas(this.dataStorage,t,r))return this.scopedGet(this.dataStorage,t,r);if(this.scopedHas(this.requestsStorage,t,r))return this.scopedGet(this.requestsStorage,t,r).promisedResponse;var o={},s=new Promise(function(e,t){o.resolve=e,o.reject=t});return o.promisedResponse=s,this.scopedSet(this.requestsStorage,t,r,o),s}catch(a){console.error(a)}}},{key:"scopedSet",value:function(e,t,r,o){try{e.has(r)||e.set(r,new Map),e.get(r).set(t,o)}catch(s){console.error(s)}}},{key:"scopedGet",value:function(e,t,r){try{return e.has(r)?e.get(r).get(t):e.get(r)}catch(o){console.error(o)}}},{key:"scopedDelete",value:function(e,t,r){try{if(!e.has(r))return;return e.get(r).delete(t)}catch(o){console.error(o)}}},{key:"scopedHas",value:function(e,t,r){try{return e.has(r)&&e.get(r).has(t)}catch(o){console.error(o)}}},{key:"deleteScope",value:function(t){t||(0,e.error)("SEOINFO: invalid scope for scope delete operation");try{this.dataStorage.has(t)&&this.dataStorage.get(t).clear(),this.requestsStorage.has(t)&&this.requestsStorage.get(t).clear()}catch(r){console.error(r)}}},{key:"has",value:function(t,r){t&&r||(0,e.error)("SEOINFO: invalid key/scope for has operation");try{return this.scopedHas(this.dataStorage,t,r)}catch(o){console.error(o)}}},{key:"delete",value:function(t,r){t&&r||(0,e.error)("SEOINFO: invalid key/scope for delete operation");try{if(this.scopedHas(this.dataStorage,t,r))return this.scopedDelete(this.dataStorage,t,r)}catch(o){console.error(o)}}},{key:"set",value:function(t,r,o){t&&r||(0,e.error)("SEOINFO: invalid key/scope for set operation");try{(0,e.isPromise)(o)?this.scopedSet(this.dataStorage,t,r,o):this.scopedSet(this.dataStorage,t,r,Promise.resolve(o)),this.resolvePendingRequests(t,r,o)}catch(s){console.error(s)}}},{key:"resolvePendingRequests",value:function(t,r,o){var s=this;try{if(!this.scopedHas(this.requestsStorage,t,r))return;var a=this.scopedGet(this.requestsStorage,t,r),n=function(e){try{return s.scopedDelete(s.requestsStorage,t,r),e}catch(o){console.error(o)}};(0,e.isPromise)(o)?o.then(function(e){try{o==s.scopedGet(s.dataStorage,t,r)&&a.resolve(n(e))}catch(i){console.error(i)}}):a.resolve(n(o))}catch(i){console.error(i)}}}]),r}(),a=new s;exports.asyncStore=a;
},{"./utils":"BYdJ"}],"C3jc":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var s=0;s<t.length;s++){var o=t[s];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function s(e,s,o){return s&&t(e.prototype,s),o&&t(e,o),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.session=exports.local=void 0;var o=function(){function t(s,o){e(this,t),this.storage=s,this.scope=o}return s(t,[{key:"get",value:function(e){var t=this.storage.getItem(this.scope+e);return t=JSON.parse(t)}},{key:"set",value:function(e,t){this.storage.setItem(this.scope+e,JSON.stringify(t))}},{key:"clear",value:function(e){e?this.storage.removeItem(this.scope+e):this.storage.clear()}}]),t}(),n=new o(window.localStorage,"sh404sef-analytics-");exports.local=n;var r=new o(window.sessionStorage,"sh404sef-analytics-");exports.session=r;
},{}],"RrWt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.updateSelect=exports.setCalendarDate=void 0;var e=require("./utils"),t=function(e,t){var a=document.getElementById(e);if(a){var r=a.closest(".field-calendar"),l=new Date(t);r._joomlaCalendar.date=l,r._joomlaCalendar.processCalendar(r._joomlaCalendar.params.firstDayOfWeek,l),r._joomlaCalendar.callHandler()}};exports.setCalendarDate=t;var a=function(t,a){var r=document.getElementById(t);if(r){for(var l=r.querySelectorAll("option"),n=function(t){(0,e.ensureArray)(a).find(function(e){return e==l[t].value})?l[t].setAttribute("selected","selected"):l[t].removeAttribute("selected")},o=0;o<l.length;++o)n(o);var d=new Event("liszt:updated");r.dispatchEvent(d)}};exports.updateSelect=a;
},{"./utils":"BYdJ"}],"S5hU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.removeClass=exports.addClass=exports.emptyElement=void 0;var e=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)};exports.emptyElement=e;var t=function(e,t,o){(o=o||document).querySelectorAll(e).forEach(function(e){e.classList.add(t)})};exports.addClass=t;var o=function(e,t,o){(o=o||document).querySelectorAll(e).forEach(function(e){e.classList.remove(t)})};exports.removeClass=o;
},{}],"zFK8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.clearErrors=exports.showErrors=exports.formatErrors=void 0;var e,r=require("../lib/utils"),t=o(require("../lib//htmlutils"));function o(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,t):{};o.get||o.set?Object.defineProperty(r,t,o):r[t]=e[t]}return r.default=e,r}var s,n=function(){return e||(e=document.getElementById("sh404sef-analytics-errors_container")),e},i=function(e){var t=(0,r.ensureArray)(e),o=[];return t.forEach(function(e){var r="";e.message&&(r+=e.message),e.code&&(r+="("+e.code+")"),e.message||e.code||(r+=e.toString()),o.push(r)}),o.join(",")};exports.formatErrors=i;var a=function(o,i,a){!1!==i&&(i=i&&!0!==i?i:3e3),!0!==a&&(a=!1),a&&t.emptyElement(n()),(0,r.ensureArray)(o).forEach(function(e){var r=document.createElement("div");r.textContent=e,n().appendChild(r)}),e.classList.add("sh404sef-visible"),s&&clearTimeout(s),i&&(s=setTimeout(c,i))};exports.showErrors=a;var c=function(){s&&clearTimeout(s),t.emptyElement(n()),n().classList.remove("sh404sef-visible")};exports.clearErrors=c;
},{"../lib/utils":"BYdJ","../lib//htmlutils":"S5hU"}],"Wj49":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.showErrorIfFailure=void 0;var r=require("../app/errors"),e=function(e,t){if(!e||!e.data||!e.data.analytics_data){var a=document.createElement("div");return a.classList.add("sh404sef-analytics-api-error"),a.textContent=(0,r.formatErrors)(e.errors),t.appendChild(a),!0}return!1};exports.showErrorIfFailure=e;
},{"../app/errors":"zFK8"}],"cmS/":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.render=void 0;var e=require("../lib//asyncstore"),t=require("../lib//utils"),a=r(require("./helper"));function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};r.get||r.set?Object.defineProperty(t,a,r):t[a]=e[a]}return t.default=e,t}var n=function(e,a){var r="";switch(!0){case a<3:r=(0,t.shortFormatInteger)(e);break;case 3==a:r=Number(e).toFixed(2);break;case 4==a:r=Number(100*e).toFixed(1)+"%";break;case 5==a:var n=(0,t.convertMs)(1e3*e);r=n.minute+"mn "+n.seconds+"s";break;case 6==a:r=Number(100*e).toFixed(2)+"%";break;case 7==a:r=(0,t.shortFormatInteger)(e);break;case 8==a:r=Number(e).toFixed(2)+"s"}return r},s=function(){e.asyncStore.get("data-global","sh404sef-analytics").then(function(e){var r=document.getElementById("analyticscontent_graph_global");if(r.classList.remove("sh404sef-loading"),!a.showErrorIfFailure(e,r)){var s=document.createElement("div");s.classList.add("sh404sef-analytics-content_global_data"),(0,t.ensureArray)(e.data.analytics_data.yAxisTitle).forEach(function(t,a){var r=document.createElement("div");r.classList.add("sh404sef-analytics-column");var o=document.createElement("span");o.textContent=t,o.classList.add("sh404sef-analytics-title");var i=document.createElement("span");i.textContent=n(e.data.analytics_data.reportRows[0][a],a),i.classList.add("sh404sef-analytics-value"),r.appendChild(o),r.appendChild(i),s.appendChild(r)}),r.appendChild(s);var o=document.createElement("div");o.classList.add("sh404sef-analytics-daterange-wrapper");var i=document.createElement("span"),c=new Date(e.data.options.startDate),d=new Date(e.data.options.endDate),l={weekday:"long",year:"numeric",month:"long",day:"numeric"};i.textContent=c.toLocaleDateString(void 0,l)+" - "+d.toLocaleDateString(void 0,l),i.classList.add("sh404sef-analytics-range"),o.appendChild(i);var u=document.createElement("span");u.textContent=e.data.analytics_data.statusMessage,u.classList.add("sh404sef-analytics-details"),o.appendChild(u),r.appendChild(o)}}).catch(function(e){console.error("sh404SEF: error rendering global chart: "+e.toString())})};exports.render=s;
},{"../lib//asyncstore":"yg2M","../lib//utils":"BYdJ","./helper":"Wj49"}],"5Lvc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.renderChart=void 0;var e=require("./utils"),r=function(r,a,o,t){var n=new google.visualization.DataTable;(0,e.ensureArray)(a.xAxisTitle).forEach(function(e){n.addColumn("string",e)}),(0,e.ensureArray)(a.yAxisTitle).forEach(function(e,r){n.addColumn(a.dataFormat[r],e)}),n.addRows(a.reportRows);var i,s=document.getElementById("analyticscontent_graph_"+r);["Line","Bar"].indexOf(o)>=0?(console.log("Drawing a material chart "+o),t=google.charts[o].convertOptions(t),i=new google.charts[o](s)):i=new google.visualization[o](s),i.draw(n,t)};exports.renderChart=r;
},{"./utils":"BYdJ"}],"A+LX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.render=void 0;var e=require("../lib//drawUtils"),t=require("../lib//asyncstore"),r=require("../lib//utils"),i=a(require("./helper"));function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};i.get||i.set?Object.defineProperty(t,r,i):t[r]=e[r]}return t.default=e,t}var o=function(){t.asyncStore.get("data-visits","sh404sef-analytics").then(function(t){var a=document.getElementById("analyticscontent_graph_visits");if(a.classList.remove("sh404sef-loading"),!i.showErrorIfFailure(t,a)){var o={};(0,r.ensureArray)(t.data.analytics_data.yAxisTitle).forEach(function(e,t){o[t]={title:e,format:"short"}});var n={chartArea:{top:"15%",width:"70%",height:"60%"},title:"",backgroundColor:"#F3F5F5",hAxis:{title:t.data.analytics_data.xAxisTitle,titleTextStyle:{color:"#777777",fontSize:12},textStyle:{color:"#777777",fontSize:10}},series:{1:{targetAxisIndex:1,lineDashStyle:[4,4]}},curveType:"function",vAxes:o,legend:{position:"top",alignment:"center",textStyle:{color:"#777777",fontSize:12}}};(0,e.renderChart)("visits",t.data.analytics_data,"AreaChart",n)}}).catch(function(e){console.error("sh404SEF: error reading data from async store to draw visits: "+e.toString())})};exports.render=o;
},{"../lib//drawUtils":"5Lvc","../lib//asyncstore":"yg2M","../lib//utils":"BYdJ","./helper":"Wj49"}],"8Sl4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.render=void 0;var e=require("../lib//drawUtils"),r=require("../lib//asyncstore"),t=o(require("./helper"));function o(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,t):{};o.get||o.set?Object.defineProperty(r,t,o):r[t]=e[t]}return r.default=e,r}var a=6,n=function(e){var r=[],t=0;return e.data.analytics_data.reportRows.forEach(function(e,o){e[0].indexOf("not set")>=0||(o<a?r.push(e):t+=e[1])}),t>0&&r.push([e.reportconfig.language.others,t]),r},i=function(){r.asyncStore.get("data-perf","sh404sef-analytics").then(function(r){var o=document.getElementById("analyticscontent_graph_perf");if(o.classList.remove("sh404sef-loading"),!t.showErrorIfFailure(r,o)){r.data.analytics_data.reportRows=n(r);var i={title:r.reportconfig.language.report_perf_title,backgroundColor:"#F3F5F5",titleTextStyle:{color:"black",fontSize:14,bold:!0},chartArea:{width:"50%"},hAxis:{title:r.reportconfig.language.report_perf_x_axis_title,viewWindow:{min:0}},vAxis:{viewWindow:{min:0,max:a+1}},legend:{position:"none"},bars:"horizontal"};(0,e.renderChart)("perf",r.data.analytics_data,"BarChart",i)}}).catch(function(e){console.error("sh404SEF: error reading data from async store to draw perf: "+e.toString())})};exports.render=i;
},{"../lib//drawUtils":"5Lvc","../lib//asyncstore":"yg2M","./helper":"Wj49"}],"YAZ4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.render=void 0;var e=require("../lib//drawUtils"),r=require("../lib//asyncstore"),t=o(require("./helper"));function o(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,t):{};o.get||o.set?Object.defineProperty(r,t,o):r[t]=e[t]}return r.default=e,r}var i=function(){r.asyncStore.get("data-sources","sh404sef-analytics").then(function(r){var o=document.getElementById("analyticscontent_graph_sources");if(o.classList.remove("sh404sef-loading"),!t.showErrorIfFailure(r,o)){var i={title:r.reportconfig.language.traffic_sources_title,backgroundColor:"#F3F5F5",titleTextStyle:{color:"black",fontSize:14,bold:!0},pieSliceText:"percentage",pieSliceTextStyle:{color:"black",fontSize:12},legend:{position:"bottom",textStyle:{color:"#777777",fontSize:12}},sliceVisibilityThreshold:.03};(0,e.renderChart)("sources",r.data.analytics_data,"PieChart",i)}}).catch(function(e){console.error("sh404SEF: error reading data from async store to draw sources: "+e.toString())})};exports.render=i;
},{"../lib//drawUtils":"5Lvc","../lib//asyncstore":"yg2M","./helper":"Wj49"}],"WE3y":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.render=void 0;var e=require("../lib//drawUtils"),t=require("../lib//asyncstore"),r=o(require("./helper"));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};o.get||o.set?Object.defineProperty(t,r,o):t[r]=e[r]}return t.default=e,t}var i=function(){t.asyncStore.get("data-devices","sh404sef-analytics").then(function(t){var o=document.getElementById("analyticscontent_graph_devices");if(o.classList.remove("sh404sef-loading"),!r.showErrorIfFailure(t,o)){var i={title:t.reportconfig.language.traffic_devices_title,backgroundColor:"#F3F5F5",titleTextStyle:{color:"black",fontSize:14,bold:!0},pieSliceText:"percentage",pieSliceTextStyle:{color:"black",fontSize:12},legend:{position:"bottom",textStyle:{color:"#777777",fontSize:12}}};(0,e.renderChart)("devices",t.data.analytics_data,"PieChart",i)}}).catch(function(e){console.error("sh404SEF: error reading data from async store to draw devices: "+e.toString())})};exports.render=i;
},{"../lib//drawUtils":"5Lvc","../lib//asyncstore":"yg2M","./helper":"Wj49"}],"PRnQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.render=void 0;var e=require("../lib//drawUtils"),r=require("../lib//asyncstore"),t=a(require("./helper"));function a(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,t):{};a.get||a.set?Object.defineProperty(r,t,a):r[t]=e[t]}return r.default=e,r}var o=6,i=function(e){var r=[],t=0;return e.data.analytics_data.reportRows.forEach(function(e,a){e[0].indexOf("not set")>=0||(a<o?r.push(e):t+=e[1])}),t>0&&r.push([e.reportconfig.language.others,t]),r},n=function(){r.asyncStore.get("data-social","sh404sef-analytics").then(function(r){var a=document.getElementById("analyticscontent_graph_social");if(a.classList.remove("sh404sef-loading"),!t.showErrorIfFailure(r,a)){r.data.analytics_data.reportRows=i(r);var n={title:r.reportconfig.language.traffic_social_title,backgroundColor:"#F3F5F5",titleTextStyle:{color:"black",fontSize:14,bold:!0},chartArea:{width:"50%"},hAxis:{title:r.reportconfig.language.traffic_social_x_axis_title},vAxis:{format:"short",viewWindow:{min:0,max:o+1}},legend:{position:"none"},bars:"horizontal"};(0,e.renderChart)("social",r.data.analytics_data,"BarChart",n)}}).catch(function(e){console.error("sh404SEF: error reading data from async store to draw social: "+e.toString())})};exports.render=n;
},{"../lib//drawUtils":"5Lvc","../lib//asyncstore":"yg2M","./helper":"Wj49"}],"3Kcp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.render=void 0;var e=require("../lib//drawUtils"),r=require("../lib//asyncstore"),t=o(require("./helper"));function o(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,t):{};o.get||o.set?Object.defineProperty(r,t,o):r[t]=e[t]}return r.default=e,r}var a=6,n=function(e){var r=[],t=0;return e.data.analytics_data.reportRows.forEach(function(e,o){o<a?r.push(e):t+=e[1]}),t>0&&r.push([e.reportconfig.language.others,t]),r},i=function(){r.asyncStore.get("data-geo","sh404sef-analytics").then(function(r){var o=document.getElementById("analyticscontent_graph_geo");if(o.classList.remove("sh404sef-loading"),!t.showErrorIfFailure(r,o)){r.data.analytics_data.reportRows=n(r);var i={title:r.reportconfig.language.traffic_geo_title,backgroundColor:"#F3F5F5",titleTextStyle:{color:"black",fontSize:14,bold:!0},chartArea:{width:"50%"},hAxis:{title:r.reportconfig.language.traffic_geo_x_axis_title},vAxis:{format:"short",viewWindow:{min:0,max:a+1}},legend:{position:"none"},bars:"horizontal"};(0,e.renderChart)("geo",r.data.analytics_data,"BarChart",i)}}).catch(function(e){console.error("sh404SEF: error reading data from async store to draw geo: "+e.toString())})};exports.render=i;
},{"../lib//drawUtils":"5Lvc","../lib//asyncstore":"yg2M","./helper":"Wj49"}],"6KaY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.render=void 0;var e=require("../lib//asyncstore"),t=require("../lib//utils"),a=s(require("./helper"));function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var s=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};s.get||s.set?Object.defineProperty(t,a,s):t[a]=e[a]}return t.default=e,t}var r=8,n=function(e,t,a){return{current:Math.ceil(e/a)+1,totalPages:Math.ceil(t/a)}},i=function(e){return[{title:e.language.previous,classes:"sh404sef-analytics-page-previous",id:"sh404sef-analytics-page-previous"},{title:e.language.next,classes:"sh404sef-analytics-page-next",id:"sh404sef-analytics-page-next"}]},l=function(e,a){var s="";switch(!0){case 0==a:s={value:(0,t.abridge)(e,{totalLength:60,introLength:45}),title:e,classes:"sh404sef-analytics-url"};break;case 1==a:s={value:(0,t.isNumber)(e)?Number(e).toInt():e.replace("<br/>"," "),classes:"sh404sef-analytics-pageviews"};break;case 2==a:s={value:(0,t.isNumber)(e)?Number(100*e).toFixed(1)+"%":e.replace("<br/>"," "),classes:"sh404sef-analytics-percent"};break;case 3==a:var r;if((0,t.isNumber)(e)){var n=(0,t.convertMs)(1e3*e);r=n.minute+"mn "+n.seconds+"s"}else r=e.replace("<br/>"," ");s={value:r,classes:"sh404sef-analytics-time-on-page"}}return s},c=function(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,c=arguments.length>1?arguments[1]:void 0;e.asyncStore.get("data-topurls","sh404sef-analytics").then(function(e){var d=document.getElementById("analyticscontent_graph_topurls");if(d.classList.remove("sh404sef-loading"),!a.showErrorIfFailure(e,d)){var o=document.createElement("div");o.classList.add("sh404sef-analytics-table"),o.classList.add("sh404sef-analytics-topurls");var u=document.createElement("div");u.classList.add("sh404sef-analytics-row","sh404sef-analytics-head");var p=document.createElement("div");p.classList.add("sh404sef-analytics-cell","sh404sef-analytics-index"),p.textContent="#",u.appendChild(p),(0,t.ensureArray)(e.data.analytics_data.yAxisTitle).forEach(function(e,t){var a=document.createElement("div");a.classList.add("sh404sef-analytics-cell");var s=l(e,t);s.classes&&a.classList.add(s.classes);var r=document.createElement("span");r.classList.add("sh404sef-analytics-header-title"),r.textContent=s.value,a.appendChild(r),u.appendChild(a)}),o.appendChild(u);var h=document.createElement("div");h.classList.add("sh404sef-analytics-rows");for(var f=Math.min(e.data.analytics_data.reportRows.length,s+r),v=function(a){var s=document.createElement("div");if(a<f){s.classList.add("sh404sef-analytics-row");var r=document.createElement("div");r.classList.add("sh404sef-analytics-cell","sh404sef-analytics-index"),r.textContent=a+1,s.appendChild(r),(0,t.ensureArray)(e.data.analytics_data.reportRows[a]).forEach(function(e,t){var a=document.createElement("div");a.classList.add("sh404sef-analytics-cell");var r=l(e,t);a.textContent=r.value,r.classes&&a.classList.add(r.classes),r.title&&a.setAttribute("title",r.title),s.appendChild(a)})}else s.classList.add("sh404sef-analytics-row-empty");h.appendChild(s)},y=s;y<s+r;y++)v(y);o.appendChild(h);var m=document.createElement("div");m.classList.add("sh404sef-analytics-row","sh404sef-analytics-footer");var g=document.createElement("span"),b=n(s,e.data.analytics_data.reportRows.length,r);g.textContent=b.current+" / "+b.totalPages,g.classList.add("sh404sef-analytics-page-item","sh404sef-analytics-counter"),m.appendChild(g),i(c).forEach(function(t){var a=document.createElement("a");a.classList.add("sh404sef-analytics-page-item",t.classes),a.setAttribute("id",t.id),a.setAttribute("href","#0"),a.setAttribute("data-start",s),a.setAttribute("data-per-page",r),a.setAttribute("data-total-rows",e.data.analytics_data.reportRows.length),a.setAttribute("data-table","topurls"),a.addEventListener("click",window.weeblrApp.analytics.changePage);var n=document.createTextNode(t.title);a.appendChild(n),m.appendChild(a)}),o.appendChild(m),d.appendChild(o)}}).catch(function(e){console.error("sh404SEF: error rendering topurls chart: "+e.toString())})};exports.render=c;
},{"../lib//asyncstore":"yg2M","../lib//utils":"BYdJ","./helper":"Wj49"}],"vlNB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.render=void 0;var e=require("../lib//asyncstore"),t=require("../lib//utils"),a=s(require("./helper"));function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var s=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};s.get||s.set?Object.defineProperty(t,a,s):t[a]=e[a]}return t.default=e,t}var r=8,n=function(e,t,a){return{current:Math.ceil(e/a)+1,totalPages:Math.ceil(t/a)}},i=function(e){return[{title:e.language.previous,classes:"sh404sef-analytics-page-previous",id:"sh404sef-analytics-page-previous"},{title:e.language.next,classes:"sh404sef-analytics-page-next",id:"sh404sef-analytics-page-next"}]},l=function(e,a){var s="";switch(!0){case 0==a:s={value:(0,t.abridge)(e,{totalLength:60,introLength:45}),title:e,classes:"sh404sef-analytics-source"};break;case 1==a:s={value:(0,t.abridge)(e,{totalLength:60,introLength:45}),title:e,classes:"sh404sef-analytics-referral-path"};break;case 2==a:s={value:(0,t.isNumber)(e)?Number(e).toInt():e.replace("<br/>"," "),classes:"sh404sef-analytics-pageviews"};break;case 3==a:s={value:(0,t.isNumber)(e)?Number(100*e).toFixed(1)+"%":e.replace("<br/>"," "),classes:"sh404sef-analytics-percent"};break;case 4==a:var r;if((0,t.isNumber)(e)){var n=(0,t.convertMs)(1e3*e);r=n.minute+"mn "+n.seconds+"s"}else r=e.replace("<br/>"," ");s={value:r,classes:"sh404sef-analytics-time-on-site"}}return s},c=function(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,c=arguments.length>1?arguments[1]:void 0;e.asyncStore.get("data-topreferrers","sh404sef-analytics").then(function(e){var d=document.getElementById("analyticscontent_graph_topreferrers");if(d.classList.remove("sh404sef-loading"),!a.showErrorIfFailure(e,d)){var o=document.createElement("div");o.classList.add("sh404sef-analytics-table"),o.classList.add("sh404sef-analytics-topreferrers");var h=document.createElement("div");h.classList.add("sh404sef-analytics-row","sh404sef-analytics-head");var p=document.createElement("div");p.classList.add("sh404sef-analytics-cell","sh404sef-analytics-index"),p.textContent="#",h.appendChild(p),(0,t.ensureArray)(e.data.analytics_data.yAxisTitle).forEach(function(e,t){var a=document.createElement("div");a.classList.add("sh404sef-analytics-cell");var s=l(e,t);s.classes&&a.classList.add(s.classes);var r=document.createElement("span");r.classList.add("sh404sef-analytics-header-title"),r.textContent=s.value,a.appendChild(r),h.appendChild(a)}),o.appendChild(h);var u=document.createElement("div");u.classList.add("sh404sef-analytics-rows");for(var f=Math.min(e.data.analytics_data.reportRows.length,s+r),v=function(a){var s=document.createElement("div");if(a<f){s.classList.add("sh404sef-analytics-row");var r=document.createElement("div");r.classList.add("sh404sef-analytics-cell","sh404sef-analytics-index"),r.textContent=a+1,s.appendChild(r),(0,t.ensureArray)(e.data.analytics_data.reportRows[a]).forEach(function(e,t){var a=document.createElement("div");a.classList.add("sh404sef-analytics-cell");var r=l(e,t);a.textContent=r.value,r.classes&&a.classList.add(r.classes),r.title&&a.setAttribute("title",r.title),s.appendChild(a)})}else s.classList.add("sh404sef-analytics-row-empty");u.appendChild(s)},y=s;y<s+r;y++)v(y);o.appendChild(u);var m=document.createElement("div");m.classList.add("sh404sef-analytics-row","sh404sef-analytics-footer");var g=document.createElement("span"),b=n(s,e.data.analytics_data.reportRows.length,r);g.textContent=b.current+" / "+b.totalPages,g.classList.add("sh404sef-analytics-page-item","sh404sef-analytics-counter"),m.appendChild(g),i(c).forEach(function(t){var a=document.createElement("a");a.classList.add("sh404sef-analytics-page-item",t.classes),a.setAttribute("id",t.id),a.setAttribute("href","#0"),a.setAttribute("data-start",s),a.setAttribute("data-per-page",r),a.setAttribute("data-total-rows",e.data.analytics_data.reportRows.length),a.setAttribute("data-table","topreferrers"),a.addEventListener("click",window.weeblrApp.analytics.changePage);var n=document.createTextNode(t.title);a.appendChild(n),m.appendChild(a)}),o.appendChild(m),d.appendChild(o)}}).catch(function(e){console.error("sh404SEF: error rendering topreferrers chart: "+e.toString())})};exports.render=c;
},{"../lib//asyncstore":"yg2M","../lib//utils":"BYdJ","./helper":"Wj49"}],"G934":[function(require,module,exports) {
"use strict";var e=f(require("./analytics/lib/utils")),t=require("./analytics/lib/throttle"),a=require("./analytics/lib/asyncstore"),r=f(require("./analytics/lib/browserstorage")),o=f(require("./analytics/lib/joomlautils")),s=f(require("./analytics/app/errors")),n=require("./analytics/graphs/global"),i=require("./analytics/graphs/visits"),c=require("./analytics/graphs/perf"),l=require("./analytics/graphs/sources"),u=require("./analytics/graphs/devices"),g=require("./analytics/graphs/social"),d=require("./analytics/graphs/geo"),p=require("./analytics/graphs/topurls"),y=require("./analytics/graphs/topreferrers"),h=require("./analytics/lib/htmlutils");function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};r.get||r.set?Object.defineProperty(t,a,r):t[a]=e[a]}return t.default=e,t}var v=null,w=2e4,b={dashboard:["visits","global","perf","sources","devices","social","geo","topurls","topreferrers"],"backend.home":["global","visits"]},m={average:1,burst:10};function D(){var e=document.getElementById("viewId");v.options.viewId=e&&e.value?e.value:"";var t=document.getElementById("dateRange");v.options.dateRange=t&&t.value?t.value:"";var a=document.getElementById("startDate");v.options.startDate=a&&a.value?a.value:"";var o=document.getElementById("endDate");v.options.endDate=o&&o.value?o.value:"";var s=document.getElementById("groupBy");v.options.groupBy=s&&s.value?s.value:"",r.local.set([v.location,v.currentPage,v.options.viewId].join("-"),v.options),r.local.set([v.location,v.currentPage,"current-view"].join("-"),v.options.viewId)}function E(e){o.updateSelect("dateRange",e.dateRange),o.updateSelect("viewId",e.viewId),o.updateSelect("groupBy",e.groupBy),o.setCalendarDate("startDate",e.startDate),o.setCalendarDate("endDate",e.endDate)}function k(e,t,a,r){var o=[a,"index.php?wbl_api=/sh404sef/v1/analytics/view",t.viewId,e].join("/"),s=["forced="+(t.forced?t.forced:0),"showFilters="+(t.showFilters?t.showFilters:"yes"),"groupBy="+t.groupBy,"startDate="+t.startDate,"endDate="+t.endDate];return t.dateRange&&s.push("dateRange="+t.dateRange),r&&(r=r.replace(/[^0-9a-zA-Z]/,""),s.push("accessKey="+encodeURIComponent(r))),o+="&"+s.join("&")}function I(){weeblrApp.spinner.start("toolbar-sh404sef-spinner")}function S(){weeblrApp.spinner.stop("toolbar-sh404sef-spinner")}function B(e,t,r){S(),console.error("sh404SEF: error in subrequest "+e+": "+t),r&&s.showErrors(t,!0,!0),a.asyncStore.set("reportData","sh404sef-analytics-"+e,{status:!1,message:t,messages:null,data:{}})}function _(r){v.options.forced=r?1:0,v.options.showFilters&&"yes"!=v.options.showFilters||D(),b[v.currentPage].forEach(function(r){t.wblThrottler.run(function(t){try{var r=k(t,v.options,v.baseUrl,v.accessKey),o=document.getElementById("analyticscontent_graph_"+t);(0,h.emptyElement)(o),a.asyncStore.delete("data-"+t,"sh404sef-analytics"),I(),e.timedOutPromise(fetch(r,{cache:"reload"}).then(function(e){try{return S(),e.json().then(function(e){if(!e.data){var r="Error fetching analytics reports data (1): "+(0,s.formatErrors)(e.errors);console.error("sh404SEF: "+r),s.showErrors(r,!0,!0)}e.reportconfig=v,a.asyncStore.set("data-"+t,"sh404sef-analytics",e)})}catch(o){S();var r="Error storing data fetched for analytics reports: "+o;console.error("sh404SEF: "+r),s.showErrors(r,!0,!0),a.asyncStore.set("reportData","sh404sef-analytics-"+t,{status:!1,message:r,messages:null,data:{}})}}).catch(function(e){B(t,"Error fetching data for analytics reports (2): "+e,!0)}),w).catch(function(e){B(t,"Error fetching data for analytics reports - timeout: "+e,!1)})}catch(n){B(t,"Error fetching data for analytics reports:"+n,!1)}},"sh404sef-analytics",v.baseUrl,m)(r),q(r,0)})}function q(e,t){var a=document.getElementById("analyticscontent_graph_"+e);switch((0,h.emptyElement)(a),e){case"visits":(0,i.render)(t,v);break;case"perf":(0,c.render)(t,v);break;case"sources":(0,l.render)(t,v);break;case"devices":(0,u.render)(t,v);break;case"social":(0,g.render)(t,v);break;case"geo":(0,d.render)(t,v);break;case"global":(0,n.render)(t,v);break;case"topurls":(0,p.render)(t,v);break;case"topreferrers":(0,y.render)(t,v)}}function F(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];s.clearErrors(),_(!0)}function R(e){e.preventDefault();var t=e.target.getAttribute("data-table"),a=Number(e.target.getAttribute("data-start")).toInt(),r=Number(e.target.getAttribute("data-per-page")).toInt(),o=Number(e.target.getAttribute("data-total-rows")).toInt();switch(e.target.getAttribute("id")){case"sh404sef-analytics-page-previous":a>=r&&q(t,a-r);break;case"sh404sef-analytics-page-next":var s=a+r;s<o&&q(t,s)}}function j(e){var t,a,r=e.options.dateRange;switch("custom"!=r||e.options.startDate&&e.options.endDate?"custom"==r?(a=new Date(e.options.startDate),t=new Date(e.options.endDate)):(a=new Date,t=new Date):(r="last_30_days",a=new Date),r){case"last_7_days":a.setTime(t.getTime()-6048e5),e.options.groupBy="ga:year,ga:month,ga:week,ga:day";break;case"last_30_days":a.setTime(t.getTime()-2592e6),e.options.groupBy="ga:year,ga:month,ga:week";break;case"last_90_days":a.setTime(t.getTime()-7776e6),e.options.groupBy="ga:year,ga:month,ga:week";break;case"this_year":var o=new Date(t.getFullYear()+"-01-01");a.setTime(o.getTime()),e.options.groupBy="ga:year,ga:month"}return e.options.startDate=a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate(),e.options.endDate=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate(),e}function P(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=document.getElementById("dateRange");v.options.dateRange=e&&e.value?e.value:"",E((v=j(v)).options)}function A(){if("frontend"===v.location){var e="",t=new URLSearchParams(window.location.search),a=!0,r=!1,o=void 0;try{for(var s,n=t.keys()[Symbol.iterator]();!(a=(s=n.next()).done);a=!0){var i=s.value;if(i){e=(e=i.toString()).replace(/[^0-9a-zA-Z]/,"");break}}}catch(c){r=!0,o=c}finally{try{a||null==n.return||n.return()}finally{if(r)throw o}}v.accessKey=e}}function O(){if(!v.options.showFilters||"yes"===v.options.showFilters){var e=[v.location,v.currentPage,"current-view"].join("-");try{var t=r.local.get(e);t&&(v.options.viewId=t)}catch(n){var a="Error reading locastorage stored current view for key sh404sef-analytics-"+e+": "+n.toString();console.error("sh404SEF: "+a)}try{e=[v.location,v.currentPage,v.options.viewId].join("-");var o=r.local.get(e);o&&(v.options=o,v=j(v),E(o))}catch(n){var s="Error reading locastorage stored config for key sh404sef-analytics-"+e+": "+n.toString();console.error("sh404SEF: "+s)}}}function T(){if(!(v=window.weeblrApp.analyticsReportConfig||{}).viewsList||v.viewsList.length<=0){var e=v.language?v.language.error_no_view:"Empty list of analytics views, probably using the wrong Analytics account.";return console.error(e),void s.showErrors(e,!1,!0)}A(),O(),_()}function C(){try{google.charts.load("current",{packages:["corechart","line","bar"]}),google.charts.setOnLoadCallback(T),window.weeblrApp.analytics={update:F,updateDateRange:P,changePage:R}}catch(e){console.error("Error initializing sh404SEF analytics reports: "+e.message)}}"loading"!=document.readyState?C():document.addEventListener("DOMContentLoaded",C);
},{"./analytics/lib/utils":"BYdJ","./analytics/lib/throttle":"tHKJ","./analytics/lib/asyncstore":"yg2M","./analytics/lib/browserstorage":"C3jc","./analytics/lib/joomlautils":"RrWt","./analytics/app/errors":"zFK8","./analytics/graphs/global":"cmS/","./analytics/graphs/visits":"A+LX","./analytics/graphs/perf":"8Sl4","./analytics/graphs/sources":"YAZ4","./analytics/graphs/devices":"WE3y","./analytics/graphs/social":"PRnQ","./analytics/graphs/geo":"3Kcp","./analytics/graphs/topurls":"6KaY","./analytics/graphs/topreferrers":"vlNB","./analytics/lib/htmlutils":"S5hU"}]},{},["G934"], null)
//# sourceMappingURL=analytics.js.map
